# 🚀 NPM 命令快速指南

## 📋 常用命令

### 开发环境
```bash
# 启动开发服务器（热重载）
npm run dev
# 访问: http://localhost:5173
```

### 生产环境构建和预览
```bash
# 1. 构建生产版本
npm run build

# 2. 预览构建结果
npm run serve
# 访问: http://192.168.56.1:5173 或 http://localhost:5173
```

### 代码质量检查
```bash
# 代码检查
npm run lint

# 自动修复代码问题
npm run fix

# 格式化代码
npm run lint:prettier
```

### Git 提交
```bash
# 规范化提交
npm run commit
```

## 🔧 环境说明

### 当前配置状态
- ✅ **开发环境**: API代理到 `http://localhost:29578`
- ✅ **生产环境**: API代理到 `http://192.168.56.1:29578`
- ✅ **403错误处理**: 已增强，包含详细错误信息和调试日志

### 访问地址
- **开发环境**: http://localhost:5173
- **生产预览**: http://192.168.56.1:5173
- **后端服务**: 需运行在端口 29578

## 🚨 403错误解决方案

如果仍然遇到403错误，请检查：

1. **后端服务状态**
   ```bash
   # 检查29578端口是否被使用
   netstat -ano | findstr :29578
   ```

2. **网络连接**
   ```bash
   # 测试后端连接（在浏览器或curl中测试）
   http://192.168.56.1:29578/health
   ```

3. **浏览器开发者工具**
   - 打开F12 -> Network面板
   - 查看API请求的实际地址
   - 检查响应状态码和错误信息

4. **认证Token**
   - 检查登录后的token是否正确存储
   - 查看请求头中是否包含正确的Authorization字段

## 💡 关键改进

1. **403错误专门处理**: 不自动退出登录，显示详细错误信息
2. **网络代理配置**: 生产环境使用网络IP地址
3. **调试日志**: 增强的错误日志，便于定位问题
4. **生产优化**: 自动移除console.log以提升性能

## 🎯 下一步建议

1. 确保后端服务在`192.168.56.1:29578`上正常运行
2. 测试登录流程是否正常
3. 如果问题仍然存在，检查后端的CORS配置和权限设置